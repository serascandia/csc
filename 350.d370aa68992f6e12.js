"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[350],{3350:(ce,Z,n)=>{n.r(Z),n.d(Z,{RolModule:()=>m});var c=n(9299);const I=[{name:"id",title:"ID",order:!1,filter:!1,filterType:"number"},{name:"nombre",title:"Nombre",order:!0,filter:!0,filterType:"text"},{name:"descripcion",title:"Descripcion",order:!0,filter:!0,filterType:"text"},{name:"activo",title:"Activo",order:!0,filter:!0,filterType:"boolean"}];var e=n(4650),U=n(4707),T=n(262),g=n(2843),y=n(3900),A=n(9646),h=n(6743),J=n(529);class a{constructor(o){this._httpClient=o,this._rol=new U.t(1)}getAllRol(){return this._httpClient.get(`${h.N.apiUrl}/rol`).pipe((0,T.K)(o=>(console.error("Error occurred:",o),(0,g._)(()=>new Error("An error occurred while fetching roles.")))))}getRolById(o){return this._httpClient.get(`${h.N.apiUrl}/rol/${o}`).pipe((0,T.K)(t=>(console.error("Error occurred:",t),(0,g._)(()=>new Error("An error occurred while fetching roles.")))))}AddRol(o){return null==o?(0,g._)(()=>new Error("No se envio ningun valor")):this._httpClient.post(`${h.N.apiUrl}/rol`,o).pipe((0,y.w)(t=>(0,A.of)(t)))}UpdateRol(o,t){return null==t?(0,g._)(()=>new Error("No se envio ningun valor")):this._httpClient.put(`${h.N.apiUrl}/rol/${o}`,t).pipe((0,y.w)(l=>(0,A.of)(l)))}}a.\u0275fac=function(o){return new(o||a)(e.LFG(J.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"});var p=n(6895),_=n(5694),N=n(805),x=n(7392),v=n(4859),b=n(6709);function Q(r,o){if(1&r&&e._UZ(0,"p-columnFilter",23),2&r){const t=e.oxw(2).$implicit;e.Q6J("type",t.filterType)("field",t.name)("showMatchModes",!1)("showOperator",!1)("showAddButton",!1)}}function O(r,o){if(1&r&&(e.TgZ(0,"div",21),e._uU(1),e.YNc(2,Q,1,5,"p-columnFilter",22),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",t.filter)}}function Y(r,o){if(1&r&&e._UZ(0,"p-columnFilter",23),2&r){const t=e.oxw(2).$implicit;e.Q6J("type",t.filterType)("field",t.name)("showMatchModes",!1)("showOperator",!1)("showAddButton",!1)}}function M(r,o){if(1&r&&(e.TgZ(0,"div",21),e._uU(1),e.YNc(2,Y,1,5,"p-columnFilter",22),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",t.filter)}}function q(r,o){if(1&r&&e._UZ(0,"p-columnFilter",23),2&r){const t=e.oxw(2).$implicit;e.Q6J("type",t.filterType)("field",t.name)("showMatchModes",!1)("showOperator",!1)("showAddButton",!0)}}function E(r,o){if(1&r&&(e.TgZ(0,"div",21),e._uU(1),e.YNc(2,q,1,5,"p-columnFilter",22),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",t.filter)}}function S(r,o){if(1&r&&e._UZ(0,"p-columnFilter",23),2&r){const t=e.oxw(2).$implicit;e.Q6J("type",t.filterType)("field",t.name)("showMatchModes",!1)("showOperator",!1)("showAddButton",!0)}}function $(r,o){if(1&r&&(e.TgZ(0,"div",21),e._uU(1),e.YNc(2,S,1,5,"p-columnFilter",22),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",t.filter)}}function k(r,o){if(1&r&&(e.TgZ(0,"th",19),e.YNc(1,O,3,2,"div",20),e.YNc(2,M,3,2,"div",20),e.YNc(3,E,3,2,"div",20),e.YNc(4,$,3,2,"div",20),e.qZA()),2&r){const t=o.$implicit;e.Q6J("pSortableColumn",t.name),e.xp6(1),e.Q6J("ngIf","number"==t.filterType),e.xp6(1),e.Q6J("ngIf","text"==t.filterType),e.xp6(1),e.Q6J("ngIf","date"==t.filterType),e.xp6(1),e.Q6J("ngIf","boolean"==t.filterType)}}function B(r,o){if(1&r&&(e.TgZ(0,"tr"),e._UZ(1,"th"),e.YNc(2,k,5,5,"th",18),e.qZA()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.columns)}}function G(r,o){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"mat-checkbox",28),e.qZA()),2&r){const t=e.oxw().$implicit,l=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",l[t.name])("color","primary")("disabled",!0)}}function j(r,o){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit,l=e.oxw().$implicit;e.xp6(1),e.Oqu(l[t.name])}}function D(r,o){if(1&r&&(e.TgZ(0,"td"),e.YNc(1,G,2,3,"div",27),e.YNc(2,j,2,1,"div",27),e.qZA()),2&r){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf","boolean"==t.filterType),e.xp6(1),e.Q6J("ngIf","boolean"!=t.filterType)}}function L(r,o){if(1&r&&(e.TgZ(0,"tr")(1,"td")(2,"a",24),e._UZ(3,"mat-icon",25),e.qZA()(),e.YNc(4,D,3,2,"td",26),e.qZA()),2&r){const t=o.$implicit,l=e.oxw();e.xp6(2),e.MGl("routerLink","edit/",t.id,""),e.xp6(2),e.Q6J("ngForOf",l.columns)}}function P(r,o){1&r&&e._UZ(0,"scs-pngtable-filters",29),2&r&&e.Q6J("tableColumns",o.columns)}const z=function(){return{"min-width":"75rem"}},H=function(){return[10,20,50]},X=function(){return["id","nombre","descripcion","activo"]};class d{constructor(o){this._rolService=o,this.columns=I,this.roles=[],this.loading=!1,this.noExisteSAP=!0}ngOnInit(){this.loadDataFromServer()}loadDataFromServer(){this.loading=!0,this._rolService.getAllRol().subscribe(o=>{this.roles=o,this.loading=!1})}}d.\u0275fac=function(o){return new(o||d)(e.Y36(a))},d.\u0275cmp=e.Xpm({type:d,selectors:[["rol"]],decls:22,vars:11,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","mx-auto","p-6","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"font-medium","tracking-tight","text-secondary"],[1,"flex","items-center","ml-6"],["routerLink","new","type","button","mat-flat-button","","matsteppernext","",1,"mat-stepper-next","px-8","mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button","mat-primary","mat-mdc-button-base"],[1,"mat-mdc-button-persistent-ripple","mdc-button__ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matripple","",1,"mat-ripple","mat-mdc-button-ripple"],[1,"mat-mdc-button-touch-target"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","w-full","mt-4"],[1,"sm:col-span-2","md:col-span-4","flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden"],["dataKey","id","currentPageReportTemplate","{first} a {last} de {totalRecords} registros",1,"pb-40",3,"loading","value","rows","tableStyle","paginator","rowsPerPageOptions","showCurrentPageReport","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["tableFilters",""],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["class","flex align-items-center",4,"ngIf"],[1,"flex","align-items-center"],["display","menu",3,"type","field","showMatchModes","showOperator","showAddButton",4,"ngIf"],["display","menu",3,"type","field","showMatchModes","showOperator","showAddButton"],["type","button","mat-flat-button","","matsteppernext","",3,"routerLink"],["svgIcon","mat_outline:edit_note"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-span-2","md:col-span-2","lg:col-span-1",3,"checked","color","disabled"],[3,"tableColumns"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Listado de roles"),e.qZA(),e._UZ(6,"div",4),e.qZA(),e.TgZ(7,"div",5)(8,"a",6),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11," Nuevo Rol "),e.qZA(),e._UZ(12,"span",9)(13,"span",10)(14,"span",11),e.qZA()()(),e.TgZ(15,"div",12)(16,"div",13)(17,"p-table",14),e.YNc(18,B,3,1,"ng-template",15),e.YNc(19,L,5,2,"ng-template",16),e.qZA()()()()(),e.YNc(20,P,1,1,"ng-template",null,17,e.W1O)),2&o&&(e.xp6(17),e.Q6J("loading",t.loading)("value",t.roles)("rows",10)("tableStyle",e.DdM(8,z))("paginator",!0)("rowsPerPageOptions",e.DdM(9,H))("showCurrentPageReport",!0)("globalFilterFields",e.DdM(10,X)))},dependencies:[c.rH,p.sg,p.O5,_.iA,N.jx,_.lQ,_.xl,x.Hw,v.zs,b.oG]});var R=n(284),s=n(9549),K=n(585),w=n(1572),W=n(6236),V=n(7775),i=n(4006),C=n(8288),F=n(8214);const ee=["addRolNgForm"];function te(r,o){if(1&r&&(e.TgZ(0,"fuse-alert",23),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.Q6J("appearance","outline")("showIcon",!1)("type",t.alert.type)("@shake","error"===t.alert.type),e.xp6(1),e.hij(" ",t.alert.message,"> ")}}function oe(r,o){1&r&&(e.TgZ(0,"span"),e._uU(1," Crear Rol "),e.qZA())}function re(r,o){1&r&&e._UZ(0,"mat-progress-spinner",24),2&r&&e.Q6J("diameter",24)("mode","indeterminate")}class u{constructor(o,t,l){this._formBuilder=o,this._activatedRoute=t,this._rolService=l,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){this.addRolForm=this._formBuilder.group({nombre:["",i.kI.required],descripcion:["",i.kI.required],activo:[!0,i.kI.required]})}AddRol(){this.addRolForm.invalid||(this.addRolForm.disable(),this.showAlert=!1,this._rolService.AddRol(this.addRolForm.value).subscribe({next:o=>{this.alert={type:"success",message:"Rol guardado"},this.showAlert=!0,this.addRolForm.enable(),this.addRolNgForm.resetForm()},error:o=>{console.error("ERROR API => ",o.error),this.addRolForm.enable(),this.addRolNgForm.resetForm(),this.alert={type:"error",message:"ocurrio un error al guardar"},this.showAlert=!0}}))}}u.\u0275fac=function(o){return new(o||u)(e.Y36(i.QS),e.Y36(c.gz),e.Y36(a))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-rol-new"]],viewQuery:function(o,t){if(1&o&&e.Gf(ee,5),2&o){let l;e.iGM(l=e.CRH())&&(t.addRolNgForm=l.first)}},decls:38,vars:14,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/configuration/rol",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex-auto","p-6","sm:p-10"],["class","mt-8",3,"appearance","showIcon","type",4,"ngIf"],[1,"flex","flex-col","items-center","mt-8","p-8","pb-4","bg-card","rounded-2xl","shadow",3,"formGroup"],["addRolNgForm","ngForm"],[1,"w-full","lg:w-3/4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"col-span-2","md:col-span-1","lg:col-span-1"],["id","nombre","matInput","",3,"placeholder","formControlName"],["id","descripcion","matInput","",3,"placeholder","formControlName"],["id","activo","matInput","",1,"col-span-2","md:col-span-2","lg:col-span-1",3,"checked","color","formControlName"],[1,"w-full","lg:w-3/4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3"],["mat-flat-button","",1,"mat-stepper-next","px-8","mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button","mat-primary","mat-mdc-button-base",3,"color","disabled","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8",3,"appearance","showIcon","type"],[3,"diameter","mode"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Rol"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Nuevo"),e.qZA()()(),e.TgZ(11,"div",8)(12,"h2",9),e._uU(13," Crear nuevo rol "),e.qZA()()()(),e.TgZ(14,"div",10)(15,"div"),e.YNc(16,te,2,5,"fuse-alert",11),e.TgZ(17,"form",12,13)(19,"div",14)(20,"mat-form-field",15)(21,"mat-label"),e._uU(22,"Rol"),e.qZA(),e._UZ(23,"input",16),e.TgZ(24,"mat-error"),e._uU(25," Nombre de rol Obligatorio "),e.qZA()(),e.TgZ(26,"mat-form-field",15)(27,"mat-label"),e._uU(28,"Descripci\xf3n"),e.qZA(),e._UZ(29,"input",17),e.TgZ(30,"mat-error"),e._uU(31," Descripci\xf3n Obligatoria "),e.qZA()(),e.TgZ(32,"mat-checkbox",18),e._uU(33," Activo "),e.qZA()(),e.TgZ(34,"div",19)(35,"button",20),e.NdJ("click",function(){return t.AddRol()}),e.YNc(36,oe,2,0,"span",21),e.YNc(37,re,1,2,"mat-progress-spinner",22),e.qZA()()()()()()),2&o){const l=e.MAs(18);e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("ngIf",t.showAlert),e.xp6(1),e.Q6J("formGroup",t.addRolForm),e.xp6(6),e.Q6J("placeholder","Nombre")("formControlName","nombre"),e.xp6(6),e.Q6J("placeholder","Descripci\xf3n")("formControlName","descripcion"),e.xp6(3),e.Q6J("checked",!0)("color","primary")("formControlName","activo"),e.xp6(3),e.Q6J("color","primary")("disabled",l.disabled),e.xp6(1),e.Q6J("ngIf",!l.disabled),e.xp6(1),e.Q6J("ngIf",l.disabled)}},dependencies:[c.rH,p.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,x.Hw,R.Nt,s.KE,s.hX,s.TO,v.lW,w.Ou,b.oG,F.W],encapsulation:2,data:{animation:C.L}});const le=["editRolNgForm"];function ne(r,o){if(1&r&&(e.TgZ(0,"fuse-alert",23),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.Q6J("appearance","outline")("showIcon",!1)("type",t.alert.type)("@shake","error"===t.alert.type),e.xp6(1),e.hij(" ",t.alert.message,"> ")}}function ie(r,o){1&r&&(e.TgZ(0,"span"),e._uU(1," Guardar cambios "),e.qZA())}function ae(r,o){1&r&&e._UZ(0,"mat-progress-spinner",24),2&r&&e.Q6J("diameter",24)("mode","indeterminate")}class f{constructor(o,t,l){this._formBuilder=o,this._activatedRoute=t,this._rolService=l,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){this._activatedRoute.params.subscribe(o=>{this.id=o.id,this.GetRolById(this.id)}),this.editRolForm=this._formBuilder.group({nombre:["",i.kI.required],descripcion:["",i.kI.required],activo:[!0,i.kI.required]})}GetRolById(o){this._rolService.getRolById(o).subscribe({next:t=>{this.rol=t,this.editRolForm=this._formBuilder.group({nombre:[t.nombre,i.kI.required],descripcion:[t.descripcion,i.kI.required],activo:[t.activo,i.kI.required]})},error:t=>{console.error("ERROR API => ",t.error)}})}UpdateRol(){this.editRolForm.invalid||(this.editRolForm.disable(),this.showAlert=!1,this._rolService.UpdateRol(this.id,this.editRolForm.value).subscribe({next:o=>{this.alert={type:"success",message:"Cambios guardados"},this.showAlert=!0,this.editRolForm.enable()},error:o=>{console.error("ERROR API => ",o.error),this.editRolForm.enable(),this.editRolNgForm.resetForm(),this.alert={type:"error",message:"ocurrio un error al guardar los cambios"},this.showAlert=!0}}))}}f.\u0275fac=function(o){return new(o||f)(e.Y36(i.QS),e.Y36(c.gz),e.Y36(a))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-rol-edit"]],viewQuery:function(o,t){if(1&o&&e.Gf(le,5),2&o){let l;e.iGM(l=e.CRH())&&(t.editRolNgForm=l.first)}},decls:38,vars:14,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/configuration/rol",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex-auto","p-6","sm:p-10"],["class","mt-8",3,"appearance","showIcon","type",4,"ngIf"],[1,"flex","flex-col","items-center","mt-8","p-8","pb-4","bg-card","rounded-2xl","shadow",3,"formGroup"],["addRolNgForm","ngForm"],[1,"w-full","lg:w-3/4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"col-span-2","md:col-span-1","lg:col-span-1"],["id","nombre","matInput","",3,"placeholder","formControlName"],["id","descripcion","matInput","",3,"placeholder","formControlName"],["id","activo","matInput","",1,"col-span-2","md:col-span-2","lg:col-span-1",3,"checked","color","formControlName"],[1,"w-full","lg:w-3/4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3"],["mat-flat-button","",1,"mat-stepper-next","px-8","mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button","mat-primary","mat-mdc-button-base",3,"color","disabled","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8",3,"appearance","showIcon","type"],[3,"diameter","mode"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Rol"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Editar"),e.qZA()()(),e.TgZ(11,"div",8)(12,"h2",9),e._uU(13," Editar rol "),e.qZA()()()(),e.TgZ(14,"div",10)(15,"div"),e.YNc(16,ne,2,5,"fuse-alert",11),e.TgZ(17,"form",12,13)(19,"div",14)(20,"mat-form-field",15)(21,"mat-label"),e._uU(22,"Rol"),e.qZA(),e._UZ(23,"input",16),e.TgZ(24,"mat-error"),e._uU(25," Nombre de rol Obligatorio "),e.qZA()(),e.TgZ(26,"mat-form-field",15)(27,"mat-label"),e._uU(28,"Descripci\xf3n"),e.qZA(),e._UZ(29,"input",17),e.TgZ(30,"mat-error"),e._uU(31," Descripci\xf3n Obligatoria "),e.qZA()(),e.TgZ(32,"mat-checkbox",18),e._uU(33," Activo "),e.qZA()(),e.TgZ(34,"div",19)(35,"button",20),e.NdJ("click",function(){return t.UpdateRol()}),e.YNc(36,ie,2,0,"span",21),e.YNc(37,ae,1,2,"mat-progress-spinner",22),e.qZA()()()()()()),2&o){const l=e.MAs(18);e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("ngIf",t.showAlert),e.xp6(1),e.Q6J("formGroup",t.editRolForm),e.xp6(6),e.Q6J("placeholder","Nombre")("formControlName","nombre"),e.xp6(6),e.Q6J("placeholder","Descripci\xf3n")("formControlName","descripcion"),e.xp6(3),e.Q6J("checked",!0)("color","primary")("formControlName","activo"),e.xp6(3),e.Q6J("color","primary")("disabled",l.disabled),e.xp6(1),e.Q6J("ngIf",!l.disabled),e.xp6(1),e.Q6J("ngIf",l.disabled)}},dependencies:[c.rH,p.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,x.Hw,R.Nt,s.KE,s.hX,s.TO,v.lW,w.Ou,b.oG,F.W],encapsulation:2,data:{animation:C.L}});const se=[{path:"",component:d},{path:"new",component:u},{path:"edit/:id",component:f}];class m{}m.\u0275fac=function(o){return new(o||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({imports:[c.Bz.forChild(se),p.ez,i.UX,_.U$,K._8,x.Ps,R.c,v.ot,s.lN,w.Cq,b.p9,W.J,V.fC,N.m8]})}}]);